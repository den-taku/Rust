16章 コレクション

標準ライブラリには様々なコレクション(collection)が含まれる
→データをメモリ上に格納するジェネリック型

他の言語との体系的な差異
・移動と借用が全ての場所で起こる
・無効化によるエラーが生じない(nullがない)

16.1 概要

8つの標準コレクションが表16-1に示されている

Vec<T>:
伸長可能なヒープ上のTの配列

VecDeque<T>:
FIFOキューに向く
末尾だけでなく先頭にも値を追加したり削除したりできる(その分少し遅い)

LinkedList<T>:
先頭と末尾に高速にアクセスできる
高速に連結することができる
ただしVec<T>やVecDeque<T>よりは遅い

BinaryHeap<T>:
順序つきのキュー
効率よく最大値を取り出せるようになっている

HashMap<K, V>:
キーと値のペアからなるテーブル
キーで高速に検索する
エントリの順番は保証されない

BTreeMap<K, V>:
エントリをキーの順番でソートした状態に保つ
ソートする必要がないならHashMapの方が高速

HashSet<T>:
型Tの集合
高速に値の追加、削除ができる
ある値が集合に含まれているかを高速に判定可能

BTreeSet<T>:
要素を値の順に保つ集合
ソートする必要がないならHashSetの方が高速

16.2 Vec<T>

ベクタを作る最も簡単な方法
→vec!マクロを使う

ベクタの3つのfield
・長さ
・容量
・要素を格納するheap上に確保したbufferへのpointer

空のベクタは初期状態では容量0でヒープメモリを確保しない

Vecはstd::iter::FromIteratorを実装している
→任意のイテレータから.collect()メソッドでベクタを作れる

16.2.1 要素へのアクセス



































































































