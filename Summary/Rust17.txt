17章 文字列とテキスト

この章で説明されること
・Unicode
・char型
・String型とstd型
・文字列フォーマット
・正規表現サポート
・Uniocodeの正規化

17.1 Unicodeについて

Rustの文字列はUnicodeを対象に設計されている

17.1.1 ASCII、Latin-1、Unicode

UnicodeとASCII
→ASCIIのコードポイントにおいて一致(0x00~0x7f)

同様に0x00~0xffはISO/IEC 8859-1文字セット(ASCIIの8bitスーパーセット)に割当
→西欧言語文字に用いられる
→→Latin-1 コードブロックと呼ぶ

UnicodeはLatin-1のスーパーセット

u8とcharの変換は(Latin-1の範囲内で)簡単

17.1.2 UTF-8

Stringやstr型
→テキストをUTF-8形式で表現する

UTF-8
→一文字を1Byteから4バイトの列にエンコードする

UTF-8が整形式(well-formed)であるための制約
・全てのコードポイントに対して最短のエンコーディングだけが整形式
・0xd800~0xdfffと0x10ffff以上の値はエンコードしてはいけない

UTF-8は0x00~0x7fのコードポイントをそのまま0x00~0x7fのバイトに変換
→ASCIIのバイト列⇔有効なUTF-8(0x00~0x7f)

任意のバイトの上位コードでUTF-8の最初のByteかどうかを判断できる
→さらに最初のByteを見れば何Byteで表現されているかわかる

4Byteより長くはエンコードされない
→無限ループが必要にならない

バイト列の途中から見てもどこで始まりどこで終わるかがわかる
→ある整形式がある整形式の一部になっていることはないということ

可変幅エンコードは固定幅エンコードよりも複雑
→しかし各性質を生かせばそこまで難しいわけでもない

17.1.3 テキストの向き

Unicodeでは通常読み書きされる順に文字を格納する
→next()やleft,rightに注意

17.2 文字(char)

char型:
Unicodeのコードポイントを保持する32bitの値
→0~0xd7ffまたは0xe000から0x10ffffまでの値にあることが保証されている

有用なトレイトを全て実装している

17.2.1 文字の分類




















































































































































